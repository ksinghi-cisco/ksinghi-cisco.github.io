
<!DOCTYPE html>
<html>
<head>
<link href="introjs.css" rel="stylesheet">
<link href="introjs-modern.css" rel="stylesheet">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Create Feature and Device Templates for the DC-vEdges in order to bring them in vManage mode.">
<meta name="keywords" content="getting_started,  feature template, vedge, vmanage">
<title>Feature and Device Templates for the DC-vEdges | Cisco SWAT SD-WAN Lab Guide</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="swat-sdwanlab.github.io" href="swat-sdwanlab.github.io/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>


</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="https://salesconnect.cisco.com/#/program/PAGE-14324" target="_blank">&nbsp;<span class="projectTitle"> Cisco SWAT</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Toggle Sidebar</a></li>
                <!-- entries without drop-downs appear here -->







                <li><a href="https://www.cisco.com" target="_blank" rel="noopener">Cisco Systems</a></li>



                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->


                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">SD-WAN Documentation<b class="caret"></b></a>
                    <ul class="dropdown-menu">


                        <li><a href="https://www.cisco.com/c/en_in/solutions/enterprise-networks/sd-wan/index.html" target="_blank" rel="noopener">Cisco SD-WAN Solution</a></li>



                        <li><a href="https://www.cisco.com/c/en/us/solutions/design-zone/networking-design-guides/branch-wan-edge.html" target="_blank" rel="noopener">SD-WAN Design Zone</a></li>



                        <li><a href="https://www.cisco.com/c/en/us/support/routers/sd-wan/products-installation-and-configuration-guides-list.html" target="_blank" rel="noopener">Configuration Guides</a></li>


                    </ul>
                </li>



			<li>



  <a class="email" title="Help and Support" href="#" onclick="javascript:window.location='mailto:swat_labops@cisco.com?subject=Cisco SWAT SD-WAN Lab Guide Feedback feedback&body=I need some help on the Feature and Device Templates for the DC-vEdges page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Need help?</a>

</li>


                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Feature and Device Templates for the DC-vEdges">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">


            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">


<ul id="mysidebar" class="nav" style="height: 100%;position: fixed;z-index: 1;overflow-x: hidden;top: 0px;left: 0px; ">
  <li class="sidebarTitle">Cisco SD-WAN </li>





  <li>
      <a title="Readme First" href="#">Readme First</a>
      <ul>



          <li><a title="Scenario based Lab Tasks" href="index.html">Scenario based Lab Tasks</a></li>






          <li><a title="How to Connect to the SWAT SD-WAN Labs" href="mydoc_connect.html">How to Connect to the SWAT SD-WAN Labs</a></li>




      </ul>
   </li>



  <li>
      <a title="Overview" href="#">Overview</a>
      <ul>



          <li><a title="Conventions used in this document" href="mydoc_Overview.html">Conventions used in this document</a></li>






          <li><a title="Topology, Credentials and IP Addressing" href="mydoc_introduction.html">Topology, Credentials and IP Addressing</a></li>






          <li><a title="Prerequisites and Objectives" href="mydoc_prerequisitesandobjectives.html">Prerequisites and Objectives</a></li>




      </ul>
   </li>



  <li>
      <a title="Bringing Up the DC-vEdges" href="#">Bringing Up the DC-vEdges</a>
      <ul>



          <li><a title="Deploying DC-vEdge1" href="mydoc_Deploying_DCvEdge1.html">Deploying DC-vEdge1</a></li>






          <li><a title="Deploying DC-vEdge2" href="mydoc_Deploying_DCvEdge2.html">Deploying DC-vEdge2</a></li>




      </ul>
   </li>



  <li>
      <a title="Deploying devices in Site 20 and Site 30" href="#">Deploying devices in Site 20 and Site 30</a>
      <ul>



          <li><a title="Deploying vEdge20 - Single INET uplink" href="mydoc_Deploying_vEdge20.html">Deploying vEdge20 - Single INET uplink</a></li>






          <li><a title="Deploying vEdge21 - Single MPLS uplink" href="mydoc_Deploying_vEdge21.html">Deploying vEdge21 - Single MPLS uplink</a></li>






          <li><a title="Deploying vEdge30 - Dual uplink" href="mydoc_Deploying_vEdge30.html">Deploying vEdge30 - Dual uplink</a></li>




      </ul>
   </li>



  <li>
      <a title="Deploying devices in Site 40 and Site 50" href="#">Deploying devices in Site 40 and Site 50</a>
      <ul>



          <li><a title="Deploying cEdge40 - Dual Uplink" href="mydoc_Deploying_cEdge40.html">Deploying cEdge40 - Dual Uplink</a></li>






          <li><a title="Deploying cEdge50 and cEdge51" href="mydoc_Deploying_cEdge50_cEdge51.html">Deploying cEdge50 and cEdge51</a></li>











      </ul>
   </li>



  <li>
      <a title="Configuring Templates" href="#">Configuring Templates</a>
      <ul>



          <li class="active"><a title="Templates for the DC-vEdges" href="mydoc_DCvEdges_templates.html">Templates for the DC-vEdges</a></li>






          <li><a title="vEdge Templates for Site 20" href="mydoc_Site20_Templates.html">vEdge Templates for Site 20</a></li>






          <li><a title="vEdge Templates for Site 30" href="mydoc_Site30_Templates.html">vEdge Templates for Site 30</a></li>






          <li><a title="cEdge Templates for Site 40" href="mydoc_Site40_Templates.html">cEdge Templates for Site 40</a></li>






          <li><a title="Applying Templates to vSmarts" href="mydoc_Templates_to_vSmarts.html">Applying Templates to vSmarts</a></li>




      </ul>
   </li>



  <li>
      <a title="Implementing Dynamic Service Side Routing" href="#">Implementing Dynamic Service Side Routing</a>
      <ul>



          <li><a title="Service Side VPNs - vEdges" href="mydoc_ssv_vedges.html">Service Side VPNs - vEdges</a></li>






          <li><a title="Service Side VPNs - cEdges" href="mydoc_ssv_cedges.html">Service Side VPNs - cEdges</a></li>






          <li><a title="Updating Device Templates" href="mydoc_devtemp_update.html">Updating Device Templates</a></li>






          <li><a title="Implementing OSPF at DC" href="mydoc_ospf_dc.html">Implementing OSPF at DC</a></li>






          <li><a title="Implementing EIGRP at Site 40" href="mydoc_eigrp_site40.html">Implementing EIGRP at Site 40</a></li>






          <li><a title="Configuring VRRP at Site 50" href="mydoc_vrrp_site50.html">Configuring VRRP at Site 50</a></li>




      </ul>
   </li>



  <li>
      <a title="TLOC Extensions" href="#">TLOC Extensions</a>
      <ul>



          <li><a title="Configuring TLOC Extensions" href="mydoc_tloc_ext.html">Configuring TLOC Extensions</a></li>




      </ul>
   </li>



  <li>
      <a title="Implementing Control Policies" href="#">Implementing Control Policies</a>
      <ul>



          <li><a title="Configuring a Hub and Spoke Topology" href="mydoc_hub_and_spoke.html">Configuring a Hub and Spoke Topology</a></li>






          <li><a title="Implementing a Regional Hub" href="mydoc_regional_hub.html">Implementing a Regional Hub</a></li>




      </ul>
   </li>



  <li>
      <a title="Implementing Data Policies and ZBF" href="#">Implementing Data Policies and ZBF</a>
      <ul>



          <li><a title="Implementing Custom Traffic Engineering" href="mydoc_custom_te.html">Implementing Custom Traffic Engineering</a></li>






          <li><a title="Implementing Direct Internet Access" href="mydoc_dia.html">Implementing Direct Internet Access</a></li>






          <li><a title="ZBF configuration for Guest DIA" href="mydoc_zbf_dia.html">ZBF configuration for Guest DIA</a></li>




      </ul>
   </li>



  <li>
      <a title="Application Aware Routing and QoS" href="#">Application Aware Routing and QoS</a>
      <ul>



          <li><a title="Configuring and Testing AAR" href="mydoc_aar.html">Configuring and Testing AAR</a></li>






          <li><a title="Setting up Quality of Service" href="mydoc_qos.html">Setting up Quality of Service</a></li>




      </ul>
   </li>



  <li>
      <a title="Cisco SD-WAN Security" href="#">Cisco SD-WAN Security</a>
      <ul>



          <li><a title="Configuring IPS" href="mydoc_ips.html">Configuring IPS</a></li>






          <li><a title="URL Filtering Configuration" href="mydoc_urlf.html">URL Filtering Configuration</a></li>






          <li><a title="Software Defined Application Visibility and Control (SD-AVC)" href="mydoc_sdavc.html">Software Defined Application Visibility and Control (SD-AVC)</a></li>






          <li><a title="Cisco SD-WAN and Umbrella" href="mydoc_umbrella.html">Cisco SD-WAN and Umbrella</a></li>




          <li><a title="Inter VPN Routing and Service Chaining" href="mydoc_servicechaining.html">Inter VPN Routing and Service Chaining</a></li>




      </ul>
   </li>



  <li>
      <a title="Cloud OnRamp for SaaS" href="#">Cloud OnRamp for SaaS</a>
      <ul>



          <li><a title="Configuring Cloud OnRamp for SaaS" href="mydoc_conrampsaas.html">Configuring Cloud OnRamp for SaaS</a></li>




      </ul>
   </li>



      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>



        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Feature and Device Templates for the DC-vEdges
      <a
	class="btn btn-large btn-primary"
	href="javascript:introJs().setOption('showProgress', true).start();"
	>Take a tour of this page</a
	>
	</h1>
</div>



<div class="post-content">


    <div class="summary">Create Feature and Device Templates for the DC-vEdges in order to bring them in vManage mode.</div>




<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc" data-step="1" data-intro="The Table of Contents will give a quick run down of the lab activities that need to be performed, along with serving as a navigation mechanism." data-position="left"></div>






   <p><br /></p>

<div class="bs-callout bs-callout-primary" data-step="2" data-intro="The Task List will allow you to keep track of what activities have been done so far." data-position="left"><strong>Task List</strong>
<br /><br />

- Creating the DC-vEdge VPN Feature Templates
<br />
        - Creating the VPN0 Feature Template
    <br />
        - Creating the VPN512 Feature Template
    <br />
        - Creating the INET VPN Interface Feature Template
    <br />
        - Creating the MPLS VPN Interface Feature Template
    <br />
        - Creating the Mgmt VPN Interface Feature Template
    <br />
- Creating a Device Template and Attaching Devices
    <br />
- Activity Verification
<br />

</div>

<h2 id="overview">Overview</h2>

<p>We have already seen feature templates in action and their versatility in large deployments is unmatched. Coupled with Device Specific parameters, we have a networking construct which is extremely malleable and can be applied in wide, arcing sweeps to similar devices through Device Templates that act as containers for grouping multiple Feature Templates.</p>

<p>In this section, we will be creating feature templates for our DC-vEdges. We will then apply these Feature Templates to Device Templates. Devices will be attached to these Device Templates, thereby ensuring that the DC-vEdges are controlled by vManage.</p>

<h2 id="creating-the-dc-vedge-vpn-feature-templates">Creating the DC-vEdge VPN Feature Templates</h2>

<h3 id="creating-the-vpn0-feature-template">Creating the VPN0 Feature Template</h3>

<ol>
  <li>
    <p data-step="3" data-intro="This is a step that needs to be performed to complete a lab task. Some steps will have tables.">On the vManage GUI, navigate to <strong>Configuration =&gt; Templates</strong></p>

    <p data-step="4" data-intro="An image will usually accompany a step, for reference." data-position="left"><img src="/images/DC-vEdge_Templates/01_conftemp.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the <strong>Feature</strong> tab and click on <strong>Add Template</strong></p>

    <p><img src="/images/DC-vEdge_Templates/02_feataddtemp.PNG" alt="" /></p>
  </li>
  <li>
    <p>Search for <em>vedge</em> in the search box and put a check mark next to <strong>vEdge Cloud</strong>. This will give the options to select Feature Templates applicable to the selected device type. Click on <strong>VPN</strong> to start configuring a VPN Template. This is going to be our VPN Template for VPN 0</p>

    <p><img src="/images/DC-vEdge_Templates/03_vecloudvpn.PNG" alt="" /></p>
  </li>
  <li>
    <p>Give the Template a name of <em>DCvEdge-vpn0</em> and a description of <em>VPN0 for the DC-vEdges INET and MPLS link</em></p>

    <p><img src="/images/DC-vEdge_Templates/03_ztempnamedesc.PNG" alt="" /></p>
  </li>
  <li>
    <p>Under <strong>Basic Configuration</strong>, specify the VPN as 0 (zero)</p>

    <p><img src="/images/DC-vEdge_Templates/04_tempnamedescvpn.PNG" alt="" /></p>
  </li>
  <li>
    <p>Populate the Primary and Secondary DNS Address as 10.y.1.5 and 10.y.1.6 respectively, where y is <em>1</em> if you’re on the SLC DC and <em>2</em> if you’re on the GHI DC (the email with lab details should enumerate which DC you’re on). Set the drop down to <strong>Global</strong> in order to enter the IPs. The option to enter the Secondary DNS server will pop up once the Primary is populated</p>

    <p><img src="/images/DC-vEdge_Templates/05_dns.PNG" alt="" /></p>
  </li>
  <li>
    <p>Under <strong>IPv4 Route</strong>, click on <strong>New IPv4 Route</strong> and specify the Prefix as Global. Populate <em>0.0.0.0/0</em> as the prefix and click on <strong>Add Next Hop</strong></p>

    <p><img src="/images/DC-vEdge_Templates/07_ipv4route.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on <strong>Add Next Hop</strong> again in the popup window</p>

    <p><img src="/images/DC-vEdge_Templates/08_addhop.PNG" alt="" /></p>
  </li>
  <li>
    <p>From the drop down, set the value to Device Specific and enter the key as <em>vpn0_inet_next_hop</em></p>

    <p><img src="/images/DC-vEdge_Templates/09_nexthopinet2.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on <strong>Add Next Hop</strong>. We will now be adding the default route for the MPLS link</p>

    <p><img src="/images/DC-vEdge_Templates/10_addmplshop.PNG" alt="" /></p>
  </li>
  <li>
    <p>Choose <strong>Device Specific</strong> from the drop down and give it a name of <em>vpn0_mpls_next_hop</em>. Click on <strong>Add</strong></p>

    <p><img src="/images/DC-vEdge_Templates/11_nexthopmpls.PNG" alt="" /></p>
  </li>
  <li>
    <p>Make sure the IPv4 Route screen shows <strong>2 Next Hop</strong> and click on Add</p>

    <p><img src="/images/DC-vEdge_Templates/12_addroute.PNG" alt="" /></p>
  </li>
  <li>
    <p>Back at the main Feature Template page, click on <strong>Save</strong>. This will create our VPN 0 Feature Template</p>

    <p><img src="/images/DC-vEdge_Templates/13_save.PNG" alt="" /></p>
  </li>
</ol>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates">Creating the DC-vEdge VPN Feature Templates</a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template">Creating the VPN512 Feature Template</a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template">Creating the INET VPN Interface Feature Template</a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template">Creating the MPLS VPN Interface Feature Template</a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template">Creating the Mgmt VPN Interface Feature Template</a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h3 id="creating-the-vpn512-feature-template">Creating the VPN512 Feature Template</h3>

<p>We will make use of the just created VPN 0 Feature Template to create our VPN 512 Feature Template.</p>

<ol>
  <li>
    <p>On the <strong>Configuration =&gt; Templates</strong> page navigate to the Feature tab and look for <em>DCvEdge-vpn0</em>. Click on the three dots for this template and click on <strong>Copy</strong></p>

    <p><img src="/images/DC-vEdge_Templates/14_copytemp.PNG" alt="" /></p>
  </li>
  <li>
    <p>Give the Template a name of <em>DCvEdge-vpn512</em> and a description of <em>VPN512 for the DC-vEdges</em>. Click on <strong>Copy</strong></p>

    <p><img src="/images/DC-vEdge_Templates/15_tempnamedesccopy.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the three dots for the newly created template and click on <strong>Edit</strong></p>

    <p><img src="/images/DC-vEdge_Templates/16_editcopied.PNG" alt="" /></p>
  </li>
  <li>
    <p>Update the Description, if it hasn’t been updated and change the VPN to <strong>512</strong></p>

    <p><img src="/images/DC-vEdge_Templates/17_vpntag.PNG" alt="" /></p>
  </li>
  <li>
    <p>Scroll down to the IPv4 Route section and click on the <strong>pencil</strong> icon to edit the 0.0.0.0/0 Route</p>

    <p><img src="/images/DC-vEdge_Templates/18_editroute.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on <strong>2 Next Hop</strong>. We will be removing the MPLS next hop entry and modifying the name of the INET next hop for the management network</p>

    <p><img src="/images/DC-vEdge_Templates/19_vpn512defroute.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the minus sign to remove the MPLS next hop</p>

    <p><img src="/images/DC-vEdge_Templates/20_delmplsnh.PNG" alt="" /></p>
  </li>
  <li>
    <p>Update the Device Specific information for the first entry to <em>vpn512_next_hop</em>. Click on <strong>Save Changes</strong></p>

    <p><img src="/images/DC-vEdge_Templates/21_vpn512nh.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on <strong>Save Changes</strong> again.  The Update IPv4 Route page should now reflect 1 Next Hop</p>

    <p><img src="/images/DC-vEdge_Templates/22_save.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on <strong>Update</strong> on the main feature template page to save the changes that we have made. The Selected Gateway Configuration should have the number 1 against it</p>

    <p><img src="/images/DC-vEdge_Templates/23_update.PNG" alt="" /></p>
  </li>
</ol>

<p>We have created our VPN512 Feature Template</p>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates">Creating the DC-vEdge VPN Feature Templates</a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template">Creating the INET VPN Interface Feature Template</a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template">Creating the MPLS VPN Interface Feature Template</a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template">Creating the Mgmt VPN Interface Feature Template</a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h3 id="creating-the-inet-vpn-interface-feature-template">Creating the INET VPN Interface Feature Template</h3>

<p>We are now going to set up the VPN Interface Feature Templates for the Internet link. This template specifies the configuration for the interfaces in a VPN. There will be two interfaces in VPN 0 (INET and MPLS) and one interface in VPN 512. Let’s start off with configuring the INET interface.</p>

<ol>
  <li>
    <p>From <strong>Configuration =&gt; Templates</strong> on the Feature tab, Add a new template. Search for <em>ved</em> in the search box and choose the vEdge Cloud Device. Click on <strong>VPN Interface Ethernet</strong> to start creating our VPN Interface Template</p>

    <p><img src="/images/DC-vEdge_Templates/24_addtempvpnint.PNG" alt="" /></p>
  </li>
  <li>
    <p>Populate the details on this page as given below. Screenshots can be used for reference. Click on <strong>Save</strong> once the fields have been populated</p>

    <table>
      <thead>
        <tr>
          <th>Section</th>
          <th>Field</th>
          <th>Global or Device Specific (drop down)</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td> </td>
          <td>Template Name</td>
          <td>NA</td>
          <td><em>DC-vEdge_INET</em></td>
        </tr>
        <tr>
          <td> </td>
          <td>Description</td>
          <td>NA</td>
          <td><em>INET interface for the DC-vEdges</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Shutdown</td>
          <td>Global</td>
          <td>No</td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Interface Name</td>
          <td>Device Specific</td>
          <td><em>vpn0_inet_if_name</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>IPv4 Address</td>
          <td>Device Specific</td>
          <td><em>vpn0_inet_if_ip</em></td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Tunnel Interface</td>
          <td>Global</td>
          <td>On</td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Color</td>
          <td>Device Specific</td>
          <td><em>vpn0_inet_if_color</em></td>
        </tr>
        <tr>
          <td>Tunnel - Allow Service</td>
          <td>All</td>
          <td>Global</td>
          <td>On</td>
        </tr>
      </tbody>
    </table>

    <p><img src="/images/Updates/DC-ve1updates/update1.PNG" alt="" /></p>

    <p><img src="/images/DC-vEdge_Templates/26_tunn.PNG" alt="" /></p>

    <p><img src="/images/DC-vEdge_Templates/27_allowall_save.PNG" alt="" /></p>
  </li>
</ol>

<p>This completes the configuration of our INET Interface Feature Template. Notice that we will be populating quite a few details when the Device is attached to a Device Template which contains this Feature Template.</p>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates">Creating the DC-vEdge VPN Feature Templates</a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template"><del>Creating the INET VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template">Creating the MPLS VPN Interface Feature Template</a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template">Creating the Mgmt VPN Interface Feature Template</a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h3 id="creating-the-mpls-vpn-interface-feature-template">Creating the MPLS VPN Interface Feature Template</h3>

<p>We are now going to set up the VPN Interface Feature Template for the MPLS link, making a copy from the INET template that we created in the previous section.</p>

<ol>
  <li>
    <p>Identify the <em>DC-vEdge_INET</em> Feature Template from <strong>Configuration =&gt; Templates =&gt; Feature tab</strong>. Click on the three dots in the extreme right-hand side of the template and click Copy. Name it <em>DC-vEdge_MPLS</em> with a Description of <em>MPLS interface for the DC-vEdges</em>. Click on <strong>Copy</strong></p>

    <p><img src="/images/DC-vEdge_Templates/28_mpls_namedesccopy.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the 3 dots next to the copied template and choose to <strong>Edit</strong>. Modify the details as per the table given below and click on <strong>Update</strong> (we have changed the Device Specific names to reflect mpls and set the restrict to On)</p>

    <table>
      <thead>
        <tr>
          <th>Section</th>
          <th>Field</th>
          <th>Global or Device Specific (drop down)</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td> </td>
          <td>Template Name</td>
          <td>NA</td>
          <td><em>DC-vEdge_MPLS</em></td>
        </tr>
        <tr>
          <td> </td>
          <td>Description</td>
          <td>NA</td>
          <td><em>MPLS interface for the DC-vEdges</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Shutdown</td>
          <td>Global</td>
          <td>No</td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Interface Name</td>
          <td>Device Specific</td>
          <td><em>vpn0_mpls_if_name</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>IPv4 Address</td>
          <td>Device Specific</td>
          <td><em>vpn0_mpls_if_ip</em></td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Tunnel Interface</td>
          <td>Global</td>
          <td>On</td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Color</td>
          <td>Device Specific</td>
          <td><em>vpn0_mpls_if_color</em></td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Restrict</td>
          <td>Global</td>
          <td>On</td>
        </tr>
      </tbody>
    </table>

    <p><img src="/images/Updates/DC-ve1updates/update4.PNG" alt="" /></p>

    <p><img src="/images/DC-vEdge_Templates/30_tunn_mpls_update.PNG" alt="" /></p>
  </li>
</ol>

<p>This completes the configuration of the MPLS VPN Interface Feature Template.</p>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates">Creating the DC-vEdge VPN Feature Templates</a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template"><del>Creating the INET VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template"><del>Creating the MPLS VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template">Creating the Mgmt VPN Interface Feature Template</a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h3 id="creating-the-mgmt-vpn-interface-feature-template">Creating the Mgmt VPN Interface Feature Template</h3>

<p>Just like before, we will make a copy of the DC-vEdge_INET Feature Template and use that for our VPN 512 Management Interface Template.</p>

<ol>
  <li>
    <p>Locate the DC-vEdge_INET template created before, click on the 3 dots at the end and choose to <strong>Copy</strong> the template</p>

    <p><img src="/images/DC-vEdge_Templates/31_copyinet_forvpn512_2.PNG" alt="" /></p>
  </li>
  <li>
    <p>Rename it to <em>DC-vEdge_mgmt_int</em> with a Description of <em>MGMT interface for the DC-vEdges</em>. Click on <strong>Copy</strong></p>

    <p><img src="/images/DC-vEdge_Templates/32_rename.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the 3 dots next to the newly created template and choose to <strong>Edit</strong>. Populate the details in the template as per the following table and click on <strong>Update</strong>. The Tunnel Interface has been set to Off</p>

    <table>
      <thead>
        <tr>
          <th>Section</th>
          <th>Field</th>
          <th>Global or Device Specific (drop down)</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td> </td>
          <td>Template Name</td>
          <td>NA</td>
          <td><em>DC-vEdge_mgmt_int</em></td>
        </tr>
        <tr>
          <td> </td>
          <td>Description</td>
          <td>NA</td>
          <td><em>MGMT interface for the DC-vEdges</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Shutdown</td>
          <td>Global</td>
          <td>No</td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>Interface Name</td>
          <td>Device Specific</td>
          <td><em>vpn512_mgmt_if_name</em></td>
        </tr>
        <tr>
          <td>Basic Configuration</td>
          <td>IPv4 Address</td>
          <td>Device Specific</td>
          <td><em>vpn512_mgmt_if_ip</em></td>
        </tr>
        <tr>
          <td>Tunnel</td>
          <td>Tunnel Interface</td>
          <td>Global</td>
          <td>Off</td>
        </tr>
      </tbody>
    </table>

    <p><img src="/images/Updates/DC-ve1updates/update5.PNG" alt="" /></p>

    <p><img src="/images/DC-vEdge_Templates/34_Tunnoff_Update.PNG" alt="" /></p>
  </li>
</ol>

<p>We have creatd the VPN 512 Interface Template.</p>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates"><del>Creating the DC-vEdge VPN Feature Templates</del></a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template"><del>Creating the INET VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template"><del>Creating the MPLS VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template"><del>Creating the Mgmt VPN Interface Feature Template</del></a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h2 id="creating-a-device-template-and-attaching-devices">Creating a Device Template and Attaching Devices</h2>

<p>Most of the work has already been done, with respect to creating the building blocks for our Device Templates. All that’s left is ensuring we create a Device Template with the corresponding Feature Templates and associate the Devices with the Template.</p>

<ol>
  <li>
    <p>Navigate to the <strong>Configuration =&gt; Templates</strong> section and make sure you’re on the <strong>Device</strong> tab. Click on <strong>Create Template =&gt; From Feature Template</strong></p>

    <p><img src="/images/DC-vEdge_Templates/35_createdevtemp.PNG" alt="" /></p>
  </li>
  <li>
    <p>Choose Device Model as <strong>vEdge Cloud</strong>, and give the Template a name of <em>DCvEdge_dev_temp</em>. Give it a Description of <em>Device template for the DC-vEdges</em></p>

    <p><img src="/images/DC-vEdge_Templates/36_name_devtype.PNG" alt="" /></p>
  </li>
  <li>
    <p>Under <strong>Transport and Management</strong> choose the VPN 0 template as <em>DCvEdge-vpn0</em> and the VPN 512 Template as <em>DCvEdge-vpn512</em>. Click twice on <strong>VPN Interface</strong> under <em>Additional VPN 0 Templates</em>. This will add two VPN Interfaces where we can associate our VPN Interface Templates. Click once on <strong>VPN Interface</strong> under <em>Additional VPN 512 Templates</em> to add a VPN Interface for VPN 512</p>

    <p><img src="/images/DC-vEdge_Templates/37_popvpntemp_clickaddvpnint.PNG" alt="" /></p>
  </li>
  <li>
    <p>Populate the VPN Interface fields from the drop down as show below and click on <strong>Create</strong></p>

    <p><img src="/images/DC-vEdge_Templates/38_vpnint_create.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the three dots next to the newly created Device Template named <em>DCvEdge_dev_temp</em> and click on <strong>Attach Devices</strong></p>

    <p><img src="/images/DC-vEdge_Templates/39_attach.PNG" alt="" /></p>
  </li>
  <li>
    <p>Move <strong>DC-vEdge1</strong> and <strong>DC-vEdge2</strong> to the list of selected devices and click on Attach</p>

    <p><img src="/images/DC-vEdge_Templates/40_choosevedges.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the three dots next to DC-vEdge1 and choose <strong>Edit Device Template</strong>. Enter the details as shown below (these are the Device Specific paramters we had defined in the Feature Templates, along with some parameters that are part of the Default Templates pre-populated in the Device Template). Click on <strong>Update</strong> once everything has been populated exactly as shown below. This information can also be picked up from the table given in the topology section</p>

    <p><img src="/images/Updates/DC-ve1updates/update6.PNG" alt="" /></p>
  </li>
  <li>
    <p>Click on the three dots next to DC-vEdge2 and choose <strong>Edit Device Template</strong>. Enter the details as shown below. Click on <strong>Update</strong> once done</p>

    <p><img src="/images/Updates/DC-ve1updates/update7.PNG" alt="" /></p>

    <p>Click on <strong>Next</strong> to proceed</p>
  </li>
  <li>
    <p>At this point, you can simply click on <strong>Configure Devices</strong> to start pushing the configuration to the devices, or you can click on an individual device on the left-hand side and followed by Config Diff and then Side by Side to view a comparison of the current configuration on the device vs. what will be pushed out. This is great for reviewing the configuration that is going to be pushed and for learning the syntax. Note that we are adding the MPLS interface and relevant configuration on our devices, which wasn’t done before.</p>

    <p><img src="/images/DC-vEdge_Templates/43_checkconfigdif.PNG" alt="" /></p>

    <p><img src="/images/DC-vEdge_Templates/44_maindiffmpls_configdev.PNG" alt="" /></p>
  </li>
  <li>
    <p>On clicking on Configure Devices, you will need to put a check mark next to <strong>Confirm configuration changes on 2 devices</strong> and click on OK</p>

    <p><img src="/images/DC-vEdge_Templates/45_checkconfig.PNG" alt="" /></p>
  </li>
  <li>
    <p>Once complete, you should see a <strong>Success</strong> message against each device that was configured</p>

    <p><img src="/images/DC-vEdge_Templates/46_success.PNG" alt="" /></p>

    <div class="alert alert-success" role="alert" data-step="5" data-intro="Watch out for special text boxes like this one - there are Warnings, Notes, Tips and Important information styled text boxes."><i class="fa fa-check-square-o"></i> <b>Tip:</b> In case a loss of connectivity occurs as a result of the configuration changes that were pushed to the Devices, there is an automatic rollback timer of 6 minutes which kicks in. Devices will revert to their previous configuration in this case. The rollback timer can be configured (on the final page before we choose to configure our devices, there is a hyperlink in the bottom left hand corner)</div>

    <p><img src="/images/DC-vEdge_Templates/44_maindiffmpls_configdev2.PNG" alt="" /></p>
  </li>
</ol>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates"><del>Creating the DC-vEdge VPN Feature Templates</del></a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template"><del>Creating the INET VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template"><del>Creating the MPLS VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template"><del>Creating the Mgmt VPN Interface Feature Template</del></a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices"><del>Creating a Device Template and Attaching Devices</del></a>
    <br />
- <a href="#activity-verification">Activity Verification</a>
<br />

</div>

<h2 id="activity-verification">Activity Verification</h2>

<ol>
  <li>
    <p>Go to <strong>Configuration =&gt; Devices</strong> and you should see that the two DC-vEdges are now in vManage mode</p>

    <p><img src="/images/DC-vEdge_Templates/47_configdev_vmmode.PNG" alt="" /></p>
  </li>
  <li>
    <p>On checking the main dashboard (<strong>Dashboard =&gt; Main Dashboard</strong>) we should see 5 sites with full WAN connectivity (if you recall, we previously could see only 4 sites with full WAN connectivity and Site 50 wasn’t showing up at all. This was because BFD sessions weren’t established on the MPLS link)</p>

    <p><img src="/images/DC-vEdge_Templates/48_maindash.PNG" alt="" /></p>
  </li>
  <li>
    <p>If we click on <strong>Full WAN Connectivity</strong>, Site 50 now shows up</p>

    <p><img src="/images/DC-vEdge_Templates/49_site50showsup.PNG" alt="" /></p>
  </li>
  <li>
    <p>Use Putty to access <strong>cEdge51</strong> and issue <code class="language-plaintext highlighter-rouge">show bfd sessions</code>. We now see BFD sessions with DC-vEdge1 and DC-vEdge2, on the MPLS link</p>

    <p><img src="/images/DC-vEdge_Templates/50_bfdsessestonce51.PNG" alt="" /></p>
  </li>
</ol>

<p>This completes the verification activity</p>

<p><br /></p>

<div class="bs-callout bs-callout-primary"><strong>Task List</strong>
<br /><br />

- <a href="#creating-the-dc-vedge-vpn-feature-templates"><del>Creating the DC-vEdge VPN Feature Templates</del></a>
<br />
        - <a href="#creating-the-vpn0-feature-template"><del>Creating the VPN0 Feature Template</del></a>
    <br />
        - <a href="#creating-the-vpn512-feature-template"><del>Creating the VPN512 Feature Template</del></a>
    <br />
        - <a href="#creating-the-inet-vpn-interface-feature-template"><del>Creating the MPLS VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mpls-vpn-interface-feature-template"><del>Creating the MPLS VPN Interface Feature Template</del></a>
    <br />
        - <a href="#creating-the-mgmt-vpn-interface-feature-template"><del>Creating the Mgmt VPN Interface Feature Template</del></a>
    <br />
- <a href="#creating-a-device-template-and-attaching-devices"><del>Creating a Device Template and Attaching Devices</del></a>
    <br />
- <a href="#activity-verification"><del>Activity Verification</del></a>
<br />

</div>








</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 Cisco Systems Inc. and/or its affiliates. All rights reserved. Cisco Partner Confidential. <br />
<span>Page last updated:</span> May 21, 2020<br/> Site last generated: Jul 23, 2020 <br />
<p><img src="images/logo.png" alt="Cisco logo" width="150" /></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>
<script type="text/javascript" src="intro2.js" href="javascript:introJs().start();"></script>
</html>
